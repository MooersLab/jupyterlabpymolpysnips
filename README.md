# juptyerlabpymolpysnips: Templates for writing and running PyMOL in Jupyter Notebooks.

There are many ways to get PyMOL running in JuptuyerLab. For details on installing JupyterLab and PyMOL, go to the [GitHub Page](https://mooerslab.github.io/juptyerlabpymolpysnips/) associated with this project.
For a list of the snippets and their descriptions, go to the [GitHub Page](https://mooerslab.github.io/juptyerlabpymolpysnips/) associated with this project.

<a id="table-of-contents"><h2>Table of Contents</h2></a>

* [Motivation](#motivation)
* [Tech Stack](#technology-stack)
* [Installation](#installation)
* [Configuration Setup](#configuration-setup)
* [Usage](#usage)
* [Testing](#testing)
* [Requests for new snippets and text editors](#requests)
* [Bug reports](#bugreports)
* [Roadmaps](#roadmap)
* [License](#license)
* [Contact Information](#contact-information)
* [How to cite](#citation)


<a id="motivation"><h2>Motivations for this project</h2></a>

### Use juptyerlabpymolpysnips to be more productive while running PyMOL in Jupyter


<p>The animation below demonstrates the use of the <b>ao.py</b> snippet in <em>JuptyerLab </em> to insert 17 lines of code for generating the ambient occlusion effect.</p>

<p align="center"><img src="gifs/JLaoSnip.gif"></p>


The result of applying a variant of the above code to a 27-nucleotide RNA hairpin is shown below.

<p align="center"><img src="./images/5d99AOD.png" alt="HTML5 Icon" style="width:364px;height:630px;"></p>

There is no option in a pulldown menu in PyMOL to make such an image. 
A script file with 17 commands is required.
This code can be applied to any molecular object that has been loaded into PyMOL.


### Why run PyMOL in a Jupyter Notebook?


#### Streamlines the management of images for a project
The images generated by PyMOL can be stored in the one Juptyer Notebook file as oppose to having dozens of script and images files squirreled away in dozens of subfolders.
The use of one file greatly eases finding the code to make a particular figure because the code and image can be next to each other. 
This ability to easily find the required code at a later time reduces the resistance to remaking a figure for manuscript resubmission, journal cover artwork, posters, platform presentations, lectures, book chpaters, review articles, websties, and wall hangings.

The use of one file also eases the sharing of images with collaborators because only one file needs to be shared.
If the collaborators are not PyMOL or Juptyer Notebook users, the notebook file can be reformated as a pdf or HTML file.


#### Facilitates combining PyMOL with other software in molecular structure analysis

Other software can be run from the same notebook during a molecular structure analysis project (e.g, bio3d, ProDy, cctbx, phenix, ccp4, ccpem, xdspy,).
This can improve the reproducibility of the comptuational asepcts of your research.

The primary caveat is that the nonpython software will require different kernels. 
This means that you will have switch kernels to use these packages in the same notebook and that software with different kernels cannot be run in the same cell.
These are very minor limitations.

A secondary caveat is that sadly some heavily used structural biology programs have yet to migrate from Python2 to Python3. 
You may have trouble running a Python2 kernel in JuptyerLab installed to run with Python3.
No worries, many of these programs can also be run from the terminal.
The input to and output from the terminal can be captured in a Jupyter Notebook.
You still carry on with your modern reproducible research practices with legacy code.


## But I will miss the interactive viewport in PyMOL!

1. There is nothing stopping you from running the PyMOL GUI next to your JupyterLab session. You can adjust the molecule's orientation manual, run the **get_view** command, and copy the output in the command history window from PyMOL and paste it into a cell in the Juptyer Notebook. The one line of settings return by the **rv** shortcut are much easier to work with. 
2. You really do not need the veiwport. With 10-15 minutes of practive, you can master the rapid iterating of rotate and translate commands to adjust the molecule's orientation with greater precision than via manipulation of the mouse.


## New to PyMOL scripting?

If you are not ready to write PyMOL scripts, please consider using [PyMOL shortcuts](https://github.com/MooersLab/pymolshortcuts) to enhance your productivity in PyMOL interactive sessions.
For example, the above ambient occlussion effect can be invoked at anytime by entering `AO` at the PyMOL prompt, if the pymolshortcuts.py file has been loaded.
These shortcuts can also be invoked in a Juptyer Notebook by submitting them as arugments to the cmd.do() method, (e.g., cmd.do("AO") to generate the ambient occlusion effect.)## Application Description

The juptyerlabpymolpysnips library contains 260 code fragments (i.e, templates or snippets) written in Python to run PyMOL in JupyterLab via PyMOL's Python API.
This API is only available for recent versions of PyMOL that depend on Python3.
This API is available for both the incentive and open-source versions of PyMOL.

For more details on using the snippets, a gallery of output, the supported text editors, **library installation**, and the content of the library, please see the associated [GitHub Page](https://mooerslab.github.io/jupyterlabpymolpysnips/).





<a id="technology-stack"><h2>Technology Stack</h2></a>

| Technology | Description                               |
|------------|-------------------------------------------|
| PyMOL   2.4   | Molecular graphics program         | 
| Python  3.7-3.9     |  Programming language          |
| JupyterLab 2.2      | A IDE for editing Jupyter Notebooks|
| jupyterlab-snippets-multimens  0.12 | Requirement extension |
| Node.js             | Required by Jupyter and many exensions |



Some of the snippets are limited to Python3 code.
If you are using an ancient version of PyMOL that relies on Python2, you can buy a license to the current version of PyMOL, install a free open-source version of PyMOL that depends on Python3 (See the PyMOL Wiki), or you can rewrite the snippet's code to be Python2 compliant. 
This often merely involves replacing print statements in Python2 with print() functions in Python3.
The commandline program 2to3 automates this process. 
Note that multiple versions of PyMOL can operate side-by-side on a computer, so yffffou do not have to delete that ancient version of PyMOL.


[Return to Table of Contents](#table-of-contents)

<a id="installation"><h2>Installation</h2></a>

Unfortunately, GitHub does not yet provide an easy way to download part of a repository.
It is easier to download the whole repository, pull out the parts that you need, and delete the rest.
Setting up and maintaining 18 separate repositories was too unwieldy.

Download all of the libraries by using the command `git clone https://github.com/MooersLab/pymolsnips.git` in a terminal window if you have *git* installed.
Alternatively, you download the repository as a zip file by clicking on the green **code** button above.

See the [GitHub Page](https://mooerslab.github.io/pymolsnips/) for installation instructions for several operating systems.

[Return to Table of Contents](#table-of-contents)



<a id="configuration-setup"><h2>Configuration Setup</h2></a>

The snippet library is independent of PyMOL. 
No modification of PyMOL is required. 

[Return to Table of Contents](#table-of-contents)


<a id="usage"><h2>Usage</h2></a>

The animation at the top of the page conveys the essential knowledge for usage. 

[Return to Table of Contents](#table-of-contents)


<a id="testing"><h2>Testing</h2></a>

Try the **ao.py** snippet. You should get a result similar to the one should in the animation above.

[Return to Table of Contents](#table-of-contents)



<a id="requests"><h2>Requests for new snippets and text editors</h2></a>

Please use the **Issues tab** above to request support for additional text editors, to suggest additional snippets, or to ask questions.
Alternatiley, you can send [e-mail](#contact-information) to me.

Questions about PyMOL should be directed to the [PyMOL Mailing List](https://pymolwiki.org/index.php/PyMOL_mailing_list).

[Return to Table of Contents](#table-of-contents)


<a id="requests"><h2>Contriubting</h2></a>

Snippets of new code are mnost welcome. Send to [e-mail](#contact-information) to me.

- submit the Python code in a plain text file
- write the filenames and function names in camelCase 
- provide a description of what the code does and any citations or links to further information.



<a id="bugreports"><h2>Bug reports</h2></a>

Use the **Issues tab** above to report bugs or send [e-mail](#contact-information) to me.
Refer bugs in the text editors to the developers of the text editors.

[Return to Table of Contents](#table-of-contents)


<a id="roadmap"><h2>Roadmap</h2></a>

I plan to expand the library to cover with examples the 500 commands and 600 settings in PyMOL.


[Return to Table of Contents](#table-of-contents)




<a id="license"><h2>License</h2></a>

We use the permissive MIT license.
The license information for this project is found in the License.txt file above. 

[Return to Table of Contents](#table-of-contents)


<a id="contact-information"><h2>Contact Information</h2></a>

I can be reached via the Issue tab above or via e-mail: `blaine-mooers at ouhsc.edu`.

[Return to Table of Contents](#table-of-contents)


<a id="citation"><h2>Citation</h2></a>

If you use this library to make figures for publication, please see the Citation.md file above.



